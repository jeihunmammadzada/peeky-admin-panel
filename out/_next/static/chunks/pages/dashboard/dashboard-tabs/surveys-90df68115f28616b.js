(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6770],{965:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/dashboard-tabs/surveys",function(){return r(4490)}])},2964:function(e,a,r){"use strict";var n,t,s,i,l,d;r.d(a,{Hn:function(){return u},Lv:function(){return m},Mx:function(){return t},vW:function(){return o},zC:function(){return c}}),(i=n||(n={}))[i.BMC=1]="BMC",i[i.Neoplan=2]="Neoplan",i[i.BYD=3]="BYD";let u=[{value:1,label:"BMC"},{value:2,label:"Neoplan"},{value:3,label:"BYD"}];(l=t||(t={})).success="success",l.error="error",(d=s||(s={})).Monday="B.E.",d.Tuesday="\xc7.A.",d.Wednesday="\xc7.",d.Thursday="C.A.",d.Friday="C.",d.Saturday="Ş.",d.Sunday="B.";let o={1:"Avtobus təmizliyi",2:"Havalandırma keyfiyyəti",3:"S\xfcr\xfcc\xfc geyimi",4:"S\xfcr\xfcc\xfc davranışı",5:"İdarəetmə tərzi",6:"Vaxtında \xe7atma",7:"Zərərli vərdişlər",8:"Dayanacaq sayı",9:"Dayanacaq şəraiti"},c={1:"Yanvar",2:"Fevral",3:"Mart",4:"Aprel",5:"May",6:"İyun",7:"İyul",8:"Avqust",9:"Sentyabr",10:"Oktyabr",11:"Noyabr",12:"Dekabr"},m={6:"06:00 - 08:00",8:"08:00 - 10:00",10:"10:00 - 12:00",17:"17:00 - 19:00",19:"19:00 - 21:00",21:"21:00 - 23:00",23:"23:00 - 00:00"}},8352:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var n=r(568),t=r(3024);function s(e,a){(0,n.Z)(1,arguments);var r,s,y,v=(0,t.Z)(null!==(r=null==a?void 0:a.additionalDigits)&&void 0!==r?r:2);if(2!==v&&1!==v&&0!==v)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var g=function(e){var a,r={},n=e.split(i.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?a=n[0]:(r.date=n[0],a=n[1],i.timeZoneDelimiter.test(r.date)&&(r.date=e.split(i.timeZoneDelimiter)[0],a=e.substr(r.date.length,e.length))),a){var t=i.timezone.exec(a);t?(r.time=a.replace(t[1],""),r.timezone=t[1]):r.time=a}return r}(e);if(g.date){var p=function(e,a){var r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};var t=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:null===s?t:100*s,restDateString:e.slice((n[1]||n[2]).length)}}(g.date,v);s=function(e,a){if(null===a)return new Date(NaN);var r,n,t=e.match(l);if(!t)return new Date(NaN);var s=!!t[4],i=o(t[1]),d=o(t[2])-1,u=o(t[3]),c=o(t[4]),y=o(t[5])-1;if(s)return c>=1&&c<=53&&y>=0&&y<=6?((r=new Date(0)).setUTCFullYear(a,0,4),n=r.getUTCDay()||7,r.setUTCDate(r.getUTCDate()+((c-1)*7+y+1-n)),r):new Date(NaN);var v=new Date(0);return d>=0&&d<=11&&u>=1&&u<=(m[d]||(h(a)?29:28))&&i>=1&&i<=(h(a)?366:365)?(v.setUTCFullYear(a,d,Math.max(i,u)),v):new Date(NaN)}(p.restDateString,p.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var x=s.getTime(),b=0;if(g.time&&isNaN(b=function(e){var a=e.match(d);if(!a)return NaN;var r=c(a[1]),n=c(a[2]),t=c(a[3]);return(24===r?0===n&&0===t:t>=0&&t<60&&n>=0&&n<60&&r>=0&&r<25)?36e5*r+6e4*n+1e3*t:NaN}(g.time)))return new Date(NaN);if(g.timezone){if(isNaN(y=function(e){if("Z"===e)return 0;var a=e.match(u);if(!a)return 0;var r="+"===a[1]?-1:1,n=parseInt(a[2]),t=a[3]&&parseInt(a[3])||0;return t>=0&&t<=59?r*(36e5*n+6e4*t):NaN}(g.timezone)))return new Date(NaN)}else{var f=new Date(x+b),w=new Date(0);return w.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),w.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),w}return new Date(x+b+y)}var i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function o(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}var m=[31,null,31,30,31,30,31,31,30,31,30,31];function h(e){return e%400==0||e%4==0&&e%100!=0}},4490:function(e,a,r){"use strict";r.r(a);var n=r(5893),t=r(7294),s=r(6720),i=r(7058),l=r(9101),d=r(8070),u=r(5675),o=r.n(u),c=r(1299),m=r(5129),h=r(1372),y=r(8352),v=r(1444),g=r(5152),p=r.n(g),x=r(44),b=r(2964);let f=p()(()=>r.e(4935).then(r.bind(r,4935)),{loadableGenerated:{webpack:()=>[4935]},ssr:!1});a.default=()=>{let[e,a]=(0,t.useState)(),[r,u]=(0,t.useState)(),[g,p]=(0,t.useState)(1),[w,N]=(0,t.useState)(5),[j,D]=(0,t.useState)(!1),[Z,A]=(0,t.useState)(!1),[C,S]=(0,t.useState)(!1),[T,I]=(0,t.useState)(),M=async()=>{A(!0),(0,m.IJ)(g,w).then(e=>{a(null==e?void 0:e.data),u(null==e?void 0:e.data.mainAnswers.pageInformation.totalCount),p(null==e?void 0:e.data.mainAnswers.pageInformation.number),A(!1)}).catch(e=>{v.Am.error("Anketlərin y\xfcklənməsi zamanı xəta baş verdi")})};(0,t.useEffect)(()=>{M()},[g,w]);let B=async e=>{S(!0),await (0,m.fz)(e).then(e=>{if((null==e?void 0:e.status)==b.Mx.success)I(e.data),S(!1);else{var a;(null==e?void 0:e.message)?v.Am.error(e.message):null==e||null===(a=e.errors)||void 0===a||a.map(e=>v.Am.error(e))}}).catch(e=>{S(!1),v.Am.error(e.message)})},z=e=>e.replaceAll("\\","/").split("/").slice(-2).join("/");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.Z,{centered:!0,size:"lg",show:j,onHide:()=>D(!1),"aria-labelledby":"example-modal-sizes-title-lg",children:[(0,n.jsx)(i.Z.Header,{closeButton:!0,children:(0,n.jsx)(i.Z.Title,{as:"h6",id:"example-modal-sizes-title-lg",children:"Anket nəticələri"})}),(0,n.jsx)(i.Z.Body,{children:(0,n.jsx)(l.Z,{children:C?(0,n.jsx)(c.default,{}):(0,n.jsxs)(d.Z,{children:[(0,n.jsxs)(l.Z,{children:[(0,n.jsx)("h4",{className:"mb-3",children:"İstidadə\xe7i məlumatları"}),(0,n.jsx)(d.Z,{xl:4,children:(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"Adı"}),": ",null==T?void 0:T.surveyAnswersById.passanger.name]})}),(0,n.jsx)(d.Z,{xl:4,children:(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"Soyadı"}),":"," ",null==T?void 0:T.surveyAnswersById.passanger.surname]})}),(0,n.jsx)(d.Z,{xl:4,children:(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"Doğum tarixi"}),":"," ",(null==T?void 0:T.surveyAnswersById.passanger.birthday)&&(0,h.Z)((0,y.Z)(null==T?void 0:T.surveyAnswersById.passanger.birthday),"dd.MM.yyyy")]})}),(0,n.jsx)(d.Z,{xl:4,children:(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"Cinsi"}),":"," ",(null==T?void 0:T.surveyAnswersById.passanger.genderName)=="Male"?"Kişi":"Qadın"]})}),(0,n.jsx)(d.Z,{xl:4,children:(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"Əlaqə n\xf6mrəsi"}),":"," ",null==T?void 0:T.surveyAnswersById.passanger.mobileNumber]})})]}),(0,n.jsx)("hr",{}),(0,n.jsxs)(l.Z,{children:[(0,n.jsx)("h4",{className:"mt-3 mb-3",children:"İstifadə\xe7inin cavabları"}),null==T?void 0:T.surveyAnswersById.surveyQuestionAnswers.sort((e,a)=>e.orderNumber-a.orderNumber).map(e=>{var a;return(0,n.jsxs)(d.Z,{md:12,children:[(0,n.jsxs)("p",{children:[(0,n.jsxs)("b",{children:[e.orderNumber,"."]})," ",e.question," ",(0,n.jsx)("b",{children:1==e.type?"- ".concat(e.answer,"/5"):2==e.type?e.answer:null})]}),3==e.type&&(0,n.jsx)(o(),{loading:"lazy",style:{borderRadius:"10px",width:"50%"},alt:"Image",width:300,height:200,src:"https://api.peeky.az/images/".concat(z(e.answer))}),(0,n.jsxs)("div",{style:{paddingLeft:"25px"},children:[e.surveySubQuestionAnswer&&(0,n.jsxs)("p",{children:[e.surveySubQuestionAnswer.question," -"," ",(0,n.jsx)("b",{children:1==e.type?"- ".concat(e.answer,"/5"):2==e.type?e.answer:null})]}),(null==e?void 0:null===(a=e.surveySubQuestionAnswer)||void 0===a?void 0:a.type)==3&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o(),{style:{borderRadius:"10px",width:"50%"},alt:"Image",width:300,height:200,src:"https://api.peeky.az/images/".concat(z(e.surveySubQuestionAnswer.answer))})})]}),(0,n.jsx)("hr",{})]})})]})]})})})]}),(0,n.jsx)(d.Z,{className:"card-body",lg:12,children:(0,n.jsx)("div",{className:"responsive",children:Z?(0,n.jsx)(c.default,{}):(0,n.jsx)(e=>{let{data:a,totalRows:r,currentPage:t,onChange:i,onChangeRowsPerPage:l}=e,d=[{name:"G\xf6ndərilmə tarixi və saatı",selector:e=>[(0,h.Z)((0,y.Z)(e.surveyCreatedDate),"dd.MM.yyyy HH:mm")],sortable:!1},{name:"İstifadə\xe7i adı",selector:e=>[e.passangerFullName],sortable:!0},{name:"Əlaqə n\xf6mrəsi",selector:e=>[e.passsangerMobileNumber],sortable:!0},{name:"Əməliyyat",selector:e=>[(0,n.jsx)(s.Z,{onClick:a=>{D(!0),B(e.surveyId)},children:"Anketə bax"})],sortable:!1}];return(0,n.jsx)(f,{columns:d,data:a,children:(0,n.jsx)(x.ZP,{columns:d,data:a,pagination:!0,paginationServer:!0,paginationTotalRows:r,paginationDefaultPage:t,onChangePage:i,onChangeRowsPerPage:l})})},{currentPage:g,totalRows:r,data:null==e?void 0:e.mainAnswers.pageData,onChange:e=>p(e),onChangeRowsPerPage:e=>{let{perPage:a,page:r}=e;N(a),p(r)}})})})]})}}},function(e){e.O(0,[7257,9260,2888,9774,179],function(){return e(e.s=965)}),_N_E=e.O()}]);