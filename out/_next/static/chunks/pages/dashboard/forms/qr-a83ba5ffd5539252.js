(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3259],{1166:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/forms/qr",function(){return l(2485)}])},2485:function(e,a,l){"use strict";l.r(a);var t=l(5893),s=l(5152),n=l.n(s),i=l(1864),r=l(6758),c=l(22),d=l(5129),o=l(7294),m=l(6720),u=l(7058),h=l(9101),b=l(8070),x=l(2270),j=l(2121),v=l(7536),f=l(1444),y=l(44),p=l(1299),N=l(5675),g=l.n(N);let Z=n()(()=>l.e(4935).then(l.bind(l,4935)),{loadableGenerated:{webpack:()=>[4935]},ssr:!1}),w=()=>{let[e,a]=(0,o.useState)(!1),[l,s]=(0,o.useState)(!1),[n,N]=(0,o.useState)(!1),[w,k]=(0,o.useState)([]),[S,C]=(0,o.useState)(),[_,A]=(0,o.useState)(!1),[Q,R]=(0,o.useState)(""),[q,E]=(0,o.useState)(""),z=async e=>{A(!0),(0,d.XG)(e).then(e=>{var a,l;E("data:image/png;base64,".concat(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(a=l.qrCode)||void 0===a?void 0:a.qrCodeBase64)),A(!1)}).catch(e=>{f.Am.error(e.message)})},{control:D,handleSubmit:F,register:P,reset:B,formState:{errors:G}}=(0,v.cI)(),M=async()=>{s(!0),(0,d.$7)().then(e=>{var a;C(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.qrCodeVehicles),s(!1)}).catch(e=>{f.Am.error("QRların y\xfcklənməsi zamanı xəta baş verdi")})};(0,o.useEffect)(()=>{(async()=>{let e=[];s(!0),(0,d.kc)().then(a=>{s(!1),M().then(l=>{var t;null===(t=a.data)||void 0===t||t.vehicles.map(a=>{e.push({value:a.id,label:a.plateNumber})})})}).then(()=>{k(e)}).catch(e=>{f.Am.error("Avtobusların y\xfcklənməsi zamanı xəta baş verdi")})})(),M()},[]);let I=async e=>{N(!0),(0,d.gr)(e).then(e=>{N(!1),a(!1),f.Am.success("QR uğurla yaradıldı"),M(),B()}).catch(e=>{e.errors.map(e=>{f.Am.error(e,{autoClose:5e3})}),N(!1)})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{title:"QR Kodlar"}),(0,t.jsx)(i.Z,{title:"QR",item:"Ana səhifə",active_item:"QR Kodlar",actionName:"QR Yarat"}),(0,t.jsxs)(u.Z,{centered:!0,size:"lg",show:e,onHide:()=>a(!1),"aria-labelledby":"example-modal-sizes-title-lg",children:[(0,t.jsx)(u.Z.Header,{closeButton:!0,children:(0,t.jsxs)(u.Z.Title,{as:"h6",id:"example-modal-sizes-title-lg",children:[Q," n\xf6mrəli avtobusun QR kodu"]})}),(0,t.jsx)(u.Z.Body,{children:(0,t.jsx)(h.Z,{children:(0,t.jsx)(b.Z,{className:"d-flex justify-content-center align-items-center",xl:12,children:_?(0,t.jsx)(p.default,{}):(0,t.jsx)(g(),{src:q,alt:"QR",width:300,height:300})})})}),(0,t.jsx)(u.Z.Footer,{children:(0,t.jsx)(m.Z,{onClick:()=>{let e=document.createElement("a");e.href="".concat(q),e.download="".concat(Q,"-qr.png"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},type:"submit",className:"btn btn-primary",children:"Y\xfcklə"})})]}),(0,t.jsx)(x.Z,{onSubmit:F(I),children:(0,t.jsxs)(h.Z,{className:"row-sm",children:[(0,t.jsxs)(b.Z,{className:"mb-3",xl:3,lg:3,md:6,sm:12,children:[(0,t.jsx)("p",{className:"mb-2 ",children:"Avtobus se\xe7in"}),(0,t.jsx)(v.Qr,{...P("vehicleId",{required:!0}),control:D,render:e=>{let{field:a}=e;return(0,t.jsx)(c.default,{...a,onChange:e=>a.onChange(null==e?void 0:e.value),value:w.find(e=>e.value===a.value),ref:a.ref,isSearchable:!0,options:w,className:"default basic-multi-select",id:"choices-multiple-default",classNamePrefix:"Select2"})}}),G.vehicleId&&(0,t.jsx)(x.Z.Control.Feedback,{className:"d-block",type:"invalid",children:"Se\xe7im edilməsi vacibdir"})]}),(0,t.jsxs)(b.Z,{className:"mb-3",xl:3,lg:3,md:6,sm:12,children:[(0,t.jsx)("p",{className:"mb-2",children:"‎"}),(0,t.jsx)(m.Z,{disabled:n,type:"submit",className:"btn btn-primary",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-grow me-2 spinner-grow-sm align-middle",role:"status","aria-hidden":"true"}),"G\xf6zləyin..."]}):"QR yaradın"})]})]})}),(0,t.jsx)(h.Z,{className:"row-sm",children:(0,t.jsx)(b.Z,{lg:12,children:(0,t.jsx)(j.Z,{className:"custom-card overflow-hiddden",children:(0,t.jsx)(j.Z.Body,{children:(0,t.jsx)("div",{className:"responsive",children:l?(0,t.jsx)(p.default,{}):(0,t.jsx)(e=>{let{data:l}=e,s=[{name:"Avtobusun n\xf6mrəsi",selector:e=>[e.plateNumber],sortable:!0},{name:"Əməliyyat",selector:e=>[(0,t.jsx)(m.Z,{onClick:l=>{a(!0),z(e.id),R(e.plateNumber)},children:"QR g\xf6stər"})]}];return(0,t.jsx)(Z,{columns:s,data:l,children:(0,t.jsx)(y.ZP,{columns:s,data:l,pagination:!0})})},{data:S})})})})})})]})};w.layout="Contentlayout",a.default=w},1864:function(e,a,l){"use strict";var t=l(5893),s=l(5152),n=l.n(s);l(7294);var i=l(1437),r=l(1372),c=l(8963),d=l(2664),o=l(1948);let m=n()(()=>l.e(22).then(l.bind(l,22)),{loadableGenerated:{webpack:()=>[22]},ssr:!1});a.Z=(0,d.$j)(e=>({local_varaiable:e}),{SetFilterDate:o.BO})(e=>{let a=[{value:"1",label:"1 Aylıq"},{value:"3",label:"3 Aylıq"},{value:"6",label:"6 Aylıq"},{value:"12",label:"1 İllik"}],l=c.Z.getState();return(0,t.jsxs)("div",{className:"d-md-flex d-block align-items-center justify-content-between page-header-breadcrumb",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"main-content-title fs-24 mb-1",children:e.title}),(0,t.jsxs)("ol",{className:"breadcrumb mb-0",children:[(0,t.jsx)("li",{className:"breadcrumb-item",children:(0,t.jsx)("a",{children:e.item})}),(0,t.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:e.active_item})]})]}),null!=e.action&&(0,t.jsx)("div",{className:"d-flex",children:(0,t.jsx)("div",{className:"justify-content-center",children:(0,t.jsxs)("button",{onClick:e.action,type:"button",className:"btn btn-primary my-2 btn-icon-text d-inline-flex align-items-center",children:[(0,t.jsx)("i",{className:"fe fe-download-cloud me-2"})," ",e.actionName]})})}),null!=e.filter&&(0,t.jsx)("div",{className:"d-flex",children:(0,t.jsx)("div",{className:"justify-content-center",style:{width:"200px"},children:(0,t.jsx)(m,{onChange:a=>{let t=(0,i.Z)(new Date,+a.value);e.SetFilterDate({...l,beginDate:(0,r.Z)(t,"yyyy-MM-dd"),endDate:(0,r.Z)(new Date,"yyyy-MM-dd")})},name:"filter",options:a,className:"default basic-multi-select",id:"choices-multiple-default",menuPlacement:"auto",classNamePrefix:"Select2",defaultValue:[a[0]]})})})]})})}},function(e){e.O(0,[7257,7761,9260,22,2888,9774,179],function(){return e(e.s=1166)}),_N_E=e.O()}]);