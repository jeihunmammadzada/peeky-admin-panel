(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8670],{2705:function(e,t,a){var n=a(5639).Symbol;e.exports=n},4239:function(e,t,a){var n=a(2705),r=a(9607),s=a(8436),l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):s(e)}},7561:function(e,t,a){var n=a(7990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(r,""):e}},1957:function(e,t,a){var n="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;e.exports=n},9607:function(e,t,a){var n=a(2705),r=Object.prototype,s=r.hasOwnProperty,l=r.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,i),a=e[i];try{e[i]=void 0;var n=!0}catch(e){}var r=l.call(e);return n&&(t?e[i]=a:delete e[i]),r}},8436:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5639:function(e,t,a){var n=a(1957),r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")();e.exports=s},7990:function(e){var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},3279:function(e,t,a){var n=a(3218),r=a(7771),s=a(4841),l=Math.max,i=Math.min;e.exports=function(e,t,a){var o,c,u,d,m,f,x=0,b=!1,v=!1,y=!0;if("function"!=typeof e)throw TypeError("Expected a function");function p(t){var a=o,n=c;return o=c=void 0,x=t,d=e.apply(n,a)}function h(e){var a=e-f,n=e-x;return void 0===f||a>=t||a<0||v&&n>=u}function j(){var e,a,n,s=r();if(h(s))return g(s);m=setTimeout(j,(e=s-f,a=s-x,n=t-e,v?i(n,u-a):n))}function g(e){return(m=void 0,y&&o)?p(e):(o=c=void 0,d)}function N(){var e,a=r(),n=h(a);if(o=arguments,c=this,f=a,n){if(void 0===m)return x=e=f,m=setTimeout(j,t),b?p(e):d;if(v)return clearTimeout(m),m=setTimeout(j,t),p(f)}return void 0===m&&(m=setTimeout(j,t)),d}return t=s(t)||0,n(a)&&(b=!!a.leading,u=(v="maxWait"in a)?l(s(a.maxWait)||0,t):u,y="trailing"in a?!!a.trailing:y),N.cancel=function(){void 0!==m&&clearTimeout(m),x=0,o=f=c=m=void 0},N.flush=function(){return void 0===m?d:g(r())},N}},3218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3448:function(e,t,a){var n=a(4239),r=a(7005);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==n(e)}},7771:function(e,t,a){var n=a(5639);e.exports=function(){return n.Date.now()}},4841:function(e,t,a){var n=a(7561),r=a(3218),s=a(3448),l=0/0,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var a=o.test(e);return a||c.test(e)?u(e.slice(2),a?2:8):i.test(e)?l:+e}},6732:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/timetable",function(){return a(6048)}])},2964:function(e,t,a){"use strict";var n,r,s,l,i,o;a.d(t,{Hn:function(){return c},Lv:function(){return m},Mx:function(){return r},vW:function(){return u},zC:function(){return d}}),(l=n||(n={}))[l.BMC=1]="BMC",l[l.Neoplan=2]="Neoplan",l[l.BYD=3]="BYD";let c=[{value:1,label:"BMC"},{value:2,label:"Neoplan"},{value:3,label:"BYD"}];(i=r||(r={})).success="success",i.error="error",(o=s||(s={})).Monday="B.E.",o.Tuesday="\xc7.A.",o.Wednesday="\xc7.",o.Thursday="C.A.",o.Friday="C.",o.Saturday="Ş.",o.Sunday="B.";let u={1:"Avtobus təmizliyi",2:"Havalandırma keyfiyyəti",3:"S\xfcr\xfcc\xfc geyimi",4:"S\xfcr\xfcc\xfc davranışı",5:"İdarəetmə tərzi",6:"Vaxtında \xe7atma",7:"Zərərli vərdişlər",8:"Dayanacaq sayı",9:"Dayanacaq şəraiti"},d={1:"Yanvar",2:"Fevral",3:"Mart",4:"Aprel",5:"May",6:"İyun",7:"İyul",8:"Avqust",9:"Sentyabr",10:"Oktyabr",11:"Noyabr",12:"Dekabr"},m={6:"06:00 - 08:00",8:"08:00 - 10:00",10:"10:00 - 12:00",17:"17:00 - 19:00",19:"19:00 - 21:00",21:"21:00 - 23:00",23:"23:00 - 00:00"}},6048:function(e,t,a){"use strict";a.r(t),a.d(t,{AssignTable:function(){return S}});var n=a(5893),r=a(1864),s=a(6758),l=a(7294),i=a(1444),o=a(3279),c=a.n(o),u=a(7058),d=a(2270),m=a(9101),f=a(8070),x=a(6720),b=a(2121),v=a(7536),y=a(2964),p=a(5129),h=a(5152),j=a.n(h),g=a(44),N=a(1299);let Z=j()(()=>a.e(4935).then(a.bind(a,4935)),{loadableGenerated:{webpack:()=>[4935]},ssr:!1}),S=e=>{let{data:t}=e,a=[{name:"Eyniləşdirmə n\xf6mrəsi",selector:e=>[e.identificationNumber],sortable:!0},{name:"Avtobusun n\xf6mrəsi",selector:e=>[e.plateNumber],sortable:!0},{name:"Qeydiyyat n\xf6mrəsi 1",selector:e=>[e.registerNumber1],sortable:!0},{name:"S\xfcr\xfcc\xfc 1",selector:e=>[e.employeeFullName1],sortable:!0},{name:"Qeydiyyat n\xf6mrəsi 2",selector:e=>[e.registerNumber2],sortable:!0},{name:"S\xfcr\xfcc\xfc 2",selector:e=>[e.employeeFullName2],sortable:!0},{name:"Marşrut",selector:e=>[e.route],sortable:!0},{name:"Başlama vaxtı",selector:e=>[e.startTime],sortable:!0},{name:"Bitmə vaxtı",selector:e=>[e.endTime],sortable:!0}];return(0,n.jsx)(Z,{columns:a,data:t,children:(0,n.jsx)(g.ZP,{columns:a,data:t,pagination:!0})})},C=()=>{let[e,t]=(0,l.useState)(!1),[a,o]=(0,l.useState)(!1),[h,j]=(0,l.useState)(!1),[g,Z]=(0,l.useState)(),[C,k]=(0,l.useState)(""),[w,T]=(0,l.useState)(),[A,B]=(0,l.useState)(""),{handleSubmit:F,register:E,setError:D,reset:M,formState:{errors:_}}=(0,v.cI)(),O=async()=>{j(!0),(0,p.ik)(C).then(e=>{var t,a;e.status==y.Mx.success?(T(null===(t=e.data)||void 0===t?void 0:t.dailyAssignments),j(!1)):null!=e.message?i.Am.error(e.message):null===(a=e.errors)||void 0===a||a.map(e=>{i.Am.error(e)})}).catch(e=>{i.Am.error(e.message),j(!1),T([])})},z=c()(e=>{e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&!isNaN(Date.parse(e))&&O()},500);(0,l.useEffect)(()=>(z(C),()=>z.cancel()),[C]);let q=async e=>{t(!0),(0,p.bN)({date:g,assignmentExcelBase64:A}).then(e=>{t(!1),o(!1),i.Am.success("Təhkimolma uğurla əlavə olundu"),O(),M()}).catch(e=>{e.message?i.Am.error(e.message,{autoClose:5e3}):e.errors.map(e=>{i.Am.error(e,{autoClose:5e3})}),t(!1)})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{title:"Cədvəllər"}),(0,n.jsx)(r.Z,{title:"Cədvəllər",item:"Ana səhifə",active_item:"Cədvəllər",action:()=>o(!0),actionName:"Excel əlavə et"}),(0,n.jsxs)(u.Z,{centered:!0,size:"lg",show:a,onHide:()=>o(!1),"aria-labelledby":"example-modal-sizes-title-lg",children:[(0,n.jsx)(u.Z.Header,{closeButton:!0,children:(0,n.jsx)(u.Z.Title,{as:"h6",id:"example-modal-sizes-title-lg",children:"Excel əlavə et"})}),(0,n.jsxs)(d.Z,{onSubmit:F(q),children:[(0,n.jsx)(u.Z.Body,{children:(0,n.jsxs)(m.Z,{className:"p-2",children:[(0,n.jsxs)(f.Z,{className:"mb-3",lg:6,md:6,sm:12,children:[(0,n.jsx)("p",{className:"mb-2 ",children:"Tarix se\xe7in"}),(0,n.jsx)(d.Z.Control,{...E("date",{required:!0}),onChange:e=>Z(e.target.value),type:"date",id:"input-date"}),_.date&&(0,n.jsx)(d.Z.Control.Feedback,{className:"d-block",type:"invalid",children:"Se\xe7im edilməsi vacibidir"})]}),(0,n.jsxs)(f.Z,{className:"mb-3",lg:6,md:6,sm:12,children:[(0,n.jsx)("p",{className:"mb-2 ",children:"File se\xe7in"}),(0,n.jsx)(d.Z.Group,{controlId:"formFile",children:(0,n.jsx)(d.Z.Control,{...E("assignmentExcelBase64",{required:"Fayl se\xe7ilməyib"}),type:"file",accept:".xls,.xlsx",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.name.endsWith(".xls")&&!a.name.endsWith(".xlsx")){D("assignmentExcelBase64",{type:"custom",message:"Yalnız .xls və .xlsx formatlı fayllara icazə verilir!"});return}let n=new FileReader;n.readAsDataURL(a),n.onload=()=>{"string"==typeof n.result&&B(n.result.split(",")[1])},n.onerror=e=>{D("assignmentExcelBase64",{type:"custom",message:"Fayl oxunarkən xəta baş verdi"}),console.error("Fayl oxunarkən xəta baş verdi:",e)}}})}),_.assignmentExcelBase64&&(0,n.jsx)(d.Z.Control.Feedback,{className:"d-block",type:"invalid",children:_.assignmentExcelBase64.message})]})]})}),(0,n.jsx)(u.Z.Footer,{children:(0,n.jsx)(x.Z,{disabled:e,type:"submit",className:"btn btn-primary",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-grow me-2 spinner-grow-sm align-middle",role:"status","aria-hidden":"true"}),"G\xf6zləyin..."]}):"Əlavə edin"})})]})]}),(0,n.jsx)(m.Z,{children:(0,n.jsxs)(f.Z,{className:"mb-3",xl:4,lg:6,md:6,sm:12,children:[(0,n.jsx)("p",{className:"mb-2 ",children:"Tarix se\xe7in"}),(0,n.jsx)(d.Z.Control,{onChange:e=>{k(e.currentTarget.value)},type:"date",id:"input-date"}),_.date&&(0,n.jsx)(d.Z.Control.Feedback,{className:"d-block",type:"invalid",children:"Se\xe7im edilməsi vacibidir"})]})}),(0,n.jsx)(m.Z,{className:"row-sm",children:(0,n.jsx)(f.Z,{lg:12,children:(0,n.jsx)(b.Z,{className:"custom-card overflow-hidden",children:(0,n.jsx)(b.Z.Body,{children:(0,n.jsx)("div",{className:"responsive",children:h?(0,n.jsx)(N.default,{}):(0,n.jsx)(S,{data:w})})})})})})]})};C.layout="Contentlayout",t.default=C},1864:function(e,t,a){"use strict";var n=a(5893),r=a(5152),s=a.n(r);a(7294);var l=a(1437),i=a(1372),o=a(8963),c=a(2664),u=a(1948);let d=s()(()=>a.e(22).then(a.bind(a,22)),{loadableGenerated:{webpack:()=>[22]},ssr:!1});t.Z=(0,c.$j)(e=>({local_varaiable:e}),{SetFilterDate:u.BO})(e=>{let t=[{value:"1",label:"1 Aylıq"},{value:"3",label:"3 Aylıq"},{value:"6",label:"6 Aylıq"},{value:"12",label:"1 İllik"}],a=o.Z.getState();return(0,n.jsxs)("div",{className:"d-md-flex d-block align-items-center justify-content-between page-header-breadcrumb",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"main-content-title fs-24 mb-1",children:e.title}),(0,n.jsxs)("ol",{className:"breadcrumb mb-0",children:[(0,n.jsx)("li",{className:"breadcrumb-item",children:(0,n.jsx)("a",{children:e.item})}),(0,n.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:e.active_item})]})]}),null!=e.action&&(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsx)("div",{className:"justify-content-center",children:(0,n.jsxs)("button",{onClick:e.action,type:"button",className:"btn btn-primary my-2 btn-icon-text d-inline-flex align-items-center",children:[(0,n.jsx)("i",{className:"fe fe-download-cloud me-2"})," ",e.actionName]})})}),null!=e.filter&&(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsx)("div",{className:"justify-content-center",style:{width:"200px"},children:(0,n.jsx)(d,{onChange:t=>{let n=(0,l.Z)(new Date,+t.value);e.SetFilterDate({...a,beginDate:(0,i.Z)(n,"yyyy-MM-dd"),endDate:(0,i.Z)(new Date,"yyyy-MM-dd")})},name:"filter",options:t,className:"default basic-multi-select",id:"choices-multiple-default",menuPlacement:"auto",classNamePrefix:"Select2",defaultValue:[t[0]]})})})]})})}},function(e){e.O(0,[7257,7761,2888,9774,179],function(){return e(e.s=6732)}),_N_E=e.O()}]);